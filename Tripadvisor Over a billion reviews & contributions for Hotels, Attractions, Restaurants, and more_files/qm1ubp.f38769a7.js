(this.$WP=this.$WP||[]).push(["qm1ubp",(e,s)=>{"use strict";var a,t,i,o,r,n,c,l,u,d,p,g,f,_,m,v,h,k,b,w,E,y,N,O,x,C,P,F,B,D,R,L,T=()=>{},q=({triggerNext:e,onPopupDismiss:s})=>{var[o,r]=a(!1),n=u(),c=l(),_=p(),v="MOBILE"===d(),h=e||T;return t((()=>{g(c)||_?s&&s():r(!0)}),[_,v,s,n,c]),o?m(i,{children:m(B,{triggerNext:h,servletName:n.page,onDismiss:()=>{s&&s(),f(c)},trackWouldOpenExplicitPreferences:T,openExplicitPreferences:T,explicitPreferencesEnabled:!1})}):null},z=({localize:e,viewportCategory:s,onDismiss:i,triggerNext:o,openExplicitPreferences:c,trackWouldOpenExplicitPreferences:l,explicitPreferencesEnabled:u,recordEvent:d,domainName:p,appIntegrationConfig:g,login:f})=>{var[_,w]=a(!1),E=r(_);E.current=_;var[O,x]=a(!1),[C,P]=a(!1),F=n((()=>{C||P(!0)}),[C,P]),B=n((()=>{F(),d("facebook_onetap_closed"),i()}),[F,d,i]),D=n((()=>{w(!0),window.FB.Event.subscribe("xfbml.render",(()=>{d("facebook_onetap_rendered")})),window.FB.getLoginStatus((e=>{"connected"===e.status||"not_authorized"===e.status?x(!0):(P(!0),o())}))}),[o,d]),R=n((()=>{var{sdkUrl:e,appId:s,apiVersion:a}=g;if(e&&s&&a){var t=()=>{},i=new Promise((e=>{t=e}));!function(e,s,a){window.fbAsyncInit=()=>{window.FB.init({appId:e,version:s,status:!0,cookie:!0}),a()}}(s,a,t),i.then(D)}else o()}),[D,g,o]);t((()=>{if(C)o();else{d("facebook_onetap_requested");var{sdkUrl:e}=g;N(e||"","MEMX"),R()}}),[R,d,o,C,g]),t((()=>{setTimeout((()=>{E.current||o()}),5e3)}),[o]);var L=n((e=>{if(!e)return null;var s=e.split(".",2)[1];if(s){var a=atob(s);try{return JSON.parse(a)}catch(e){d("facebook_onetap_parseSignedRequestFailed")}}return null}),[d]),T=n((e=>{var s=L(e);s&&s.code&&(h.set("FacebookAuthCode2",s.code,{expires:new Date((new Date).getTime()+5e3),domain:p,path:"/"}),f({flow:"FACEBOOK_ONETAP",pid:40600,flowOrigin:"login",extraQueryParams:{social:"true"},deferShowOverlay:!0,onClose:()=>{B()},onSuccess:e=>{e&&e.userId&&(F(),e.hasCreatedMember&&(l&&l(),u&&c&&c()))}}))}),[f,F,l,B,p,u,c,L]),q=n((()=>{d("facebook_onetap_clicked"),window.FB.getLoginStatus((e=>{if("connected"===e.status){var{authResponse:s}=e;s&&s.accessToken&&T(s.signedRequest)}}))}),[d,T]);if(C||!_||!O)return null;var z={headline:e("onetap_message_unlock"),subhead:e("onetap_subhead_signin_alerts_deals")};setTimeout((()=>{window.FB.XFBML.parse()}),50),window.FB.Event.subscribe("auth.authResponseChange",(()=>{q()}));var A="MOBILE"===s;return v("div",{className:k("oZwqD D Gi B1 Z BB","RoZcR"),style:{bottom:A?"0px":"unset"},children:[m(y,{onClick:B}),v("div",{className:"QGCww w z",children:[m("div",{className:"dpfbx Ci b f u",children:m("div",{children:z.headline})}),m("p",{className:"fFBkN Mc Nb MA NC",children:z.subhead}),m("div",{className:"ZOVpo w",children:m("div",{className:"w",children:m("div",{className:"fb-login-button","data-width":"100%","data-max-rows":"1","data-size":"large","data-button-type":"continue_with","data-show-faces":"true","data-auto-logout-link":"false","data-use-continue-as":"true","data-scope":"email,user_hometown,user_friends,user_likes,user_location,user_status,user_photos",style:{width:"100%"}})})}),m("div",{className:"YMLar Ci",children:m(b,{id:"terms_and_policy_links",args:{0:"/pages/terms.html",1:"/pages/privacy.html",2:"legalLink"}})})]})]})},A={__key:0xb7c064a1dc73,id:"b7c064a1dc739c643393c7082b231ce7",loc:{},definitions:[]},I=({triggerNext:e,onPopupDismiss:s})=>{var{page:a}=u(),i=_.includes(a),{trackWouldOpenExplicitPreferences:o}=O("ONBOARDING","FB_ONETAP"),r=n((()=>{i&&o()}),[o,i]),c=()=>{},g=n((()=>{var a=e||c;s&&s(),a()}),[s,e]),{localize:v}=w(),h=P(),k=d(),b=x(),y=C(),N=n((e=>{y({module:"facebook_onetap",action:e,context:`${a||"unknown"}`})}),[a,y]),B=E(),D=l(),L=p(),[{data:T,fetching:q,error:z}]=F({query:A,variables:{locale:B},pause:!!L});return t((()=>{q||!z&&T&&T.Facebook_getFbConnectConfig||g()}),[q,z,T,g]),q||z||!T||!T.Facebook_getFbConnectConfig?null:m(R,{onDismiss:()=>{s&&s(),f(D)},triggerNext:g,trackWouldOpenExplicitPreferences:r,appIntegrationConfig:T.Facebook_getFbConnectConfig,localize:v,viewportCategory:k,recordEvent:N,domainName:b,login:h})},S=["UserReview","UserReviewEdit"],M=()=>{var[e,s]=a(!1),[i,o]=a("GOOGLE_ONETAP"),r=l(),f=p(),{page:_,params:v}=u(),h="MOBILE"===d();t((()=>{S.includes(_)||g(r)||f?s(!0):e&&s(!1)}),[e,f,r,s,_,v,h]);var k=n((()=>{o("FACEBOOK_ONETAP")}),[o]),b=()=>null,w=b,E=[],y="registration_dialog";switch(i){case"GOOGLE_ONETAP":E=["google_one_tap"],w=({dismiss:e})=>m(D,{triggerNext:k,onPopupDismiss:()=>{e()}}),y="google_one_tap";break;case"FACEBOOK_ONETAP":E=["facebook_one_tap"],w=({dismiss:e})=>m(L,{onPopupDismiss:()=>{e()}}),y="facebook_one_tap"}return c({factory:b,eventTypes:[],key:"skip_marketing_interstitial",tier:50,skip:!0}),c({factory:b,eventTypes:[],key:"skip_date_picker",tier:100,skip:"HotelsFusion"!==_}),c({factory:w,eventTypes:E,key:e?`skip_${y}`:y,tier:200,skip:e}),null};return[()=>{B=o((()=>s("1j3bsm"))),D=q,R=z,L=I,e("default",M)},[e=>(a=e.useState,t=e.useEffect,i=e.Suspense,o=e.lazy,r=e.useRef,n=e.useCallback),e=>c=e.usePopupHierarchyRender,e=>l=e.useSessionId,e=>u=e.useRoute,e=>d=e.useViewportCategory,e=>p=e.useUserId,e=>(g=e.shouldSuppressRegistrationDialog,f=e.setRegDialogDismissed,_=e.HOTEL_SERVLETS),e=>(m=e.jsx,v=e.jsxs),e=>h=e.default,e=>k=e.default,e=>(b=e.UnsafeLocalize,w=e.useLocalize,E=e.useLocale),e=>y=e.CloseIcon,e=>N=e.importScript,e=>O=e.default,e=>x=e.useDomainName,e=>C=e.useGARecorder,e=>P=e.default,e=>F=e.useQuery]]},["1o4yt4","1xo1is","1al4vi","fgwvq1","1ys6v1","52far5","cyrz7y","121h32","5gpqhx","fkji80","17thqz","1uzmmz","1q7wvk","dvdzap","qlcuu5","32pwc7","lchj5q","1mqwhq"]]);
